"use strict";angular.module("primeiraApp",["ui.router","ui.utils.masks","toastr","isteven-multi-select","leaflet-directive","chart.js"]);
"use strict";function AcoesCriminosasController(e,t,o,n,r,i,a,s,m,c,l){var p=e;p.$on("$destroy",function(){c.resetMarkerGroups()}),p.searchAcoesCriminosas=function(){p.ajustarMapa(),r.show(e,{tabList:!0,tabCreate:!0}),p.user_cooperativa=l.getUser().cooperativa,p.user_pa=l.getUser().pa,p.user_id=l.getUser()._id,p.user_nivel=l.getUser().nivel;var a=i.apiUrl+"/acoesCriminosas/buscarAcoesCriminosas/"+p.user_cooperativa+"/"+p.user_pa+"/"+p.user_nivel;t.post(a).then(function(a){p.acoesCriminosas=a.data,p.acaoCriminosa={},r.show(e,{tabList:!0,tabCreate:!0})},function(a){console.log("Fail")})},p.haSuspeitos="nao",p.haSuspeitos2="nao",p.haSuspeitos3="nao",p.haSuspeitos4="nao",p.haVeiculo="nao",p.cadastrarAcaoCriminosa=function(){var a=i.apiUrl+"/acoesCriminosas";p.acaoCriminosa.user_cooperativa=p.user_cooperativa,p.acaoCriminosa.user_pa=p.user_pa,p.acaoCriminosa.user_id=p.user_id,t.post(a,p.acaoCriminosa).then(function(a){p.acaoCriminosa={},n.addSuccess("Operação realizada com sucesso!!"),o.path("/dashboard")}).catch(function(a){n.addError(a.data.errors)})},p.marcarPosicaoAcao=function(){p.markers2={sicoob:{lat:-27.226785483109737,lng:-52.01850950717926,draggable:!0,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},focus:!0}},p.events2={markers:{enable:m.getAvailableEvents()}},p.eventDetected="No events yet...";var a=m.getAvailableEvents();for(var e in a){var o="leafletDirectiveMarker."+a[e];p.$on(o,function(a,e){p.eventDetected=a.name})}p.$on("leafletDirectiveMarker.dragend",function(a,e){p.acaoCriminosa.latitude=e.model.lat,p.acaoCriminosa.longitude=e.model.lng})},angular.extend(p,{center2:{lat:-27.226548,lng:-52.018311,zoom:17},markers2:p.markers2,defaults2:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),p.cancel=function(){r.show(p,{tabList:!0,tabCreate:!0}),p.acaoCriminosa={},p.searchAcoesCriminosas(),o.path("/dashboard")},p.tipoAcoes=[{name:"Furto"},{name:"Roubo armado"},{name:"Furto com maçarico"},{name:"Roubo com furadeira"},{name:"Roubo com explosivo"},{name:"Roubo armado"},{name:"Estelionato"}],p.etnia=[{name:"Branco"},{name:"Negros"},{name:"Amarelo"},{name:"Indígena"},{name:"Pardo"},{name:"Mulato"},{name:"Caboclo"}],p.cumprimentoCabelo=[{name:"Curto"},{name:"Médio"},{name:"Longo"},{name:"Calvo"}],p.corCabelo=[{name:"Louro"},{name:"Preto"},{name:"Castanho"},{name:"Ruivo"},{name:"Grisalho"}],p.alturaSuspeito=[{name:"150"},{name:"155"},{name:"160"},{name:"165"},{name:"170"},{name:"175"},{name:"180"},{name:"185"},{name:"190"},{name:"195"},{name:"200"}],p.idadeSuspeito=[{name:"15"},{name:"20"},{name:"25"},{name:"30"},{name:"35"},{name:"40"},{name:"45"},{name:"50"},{name:"55"},{name:"60"},{name:"65"},{name:"70"},{name:"75"},{name:"80"}],p.pesoSuspeito=[{name:"50"},{name:"55"},{name:"60"},{name:"65"},{name:"70"},{name:"75"},{name:"80"},{name:"85"},{name:"90"},{name:"95"},{name:"100"},{name:"110"},{name:"120"},{name:"130"}],p.armaSuspeito=[{name:"Pistola"},{name:"Revolver"},{name:"Fuzil"},{name:"SMG"}],p.fonte=[{name:"Polícia Militar"},{name:"Polícia Civil"},{name:"Gerente"}],p.markers=new Array,p.buscaLatLong=function(){var a=i.apiUrl+"/acoesCriminosas/searchAcoesCriminosas/";t.get(a).then(function(a){p.acoesCriminosas=a.data,angular.forEach(p.acoesCriminosas,function(a,e){p.latitude=parseFloat(a.latitude),p.longitude=parseFloat(a.longitude),p.tipoAcao=a.tipoAcao;var o=p.tipoAcao;p.markers.push({group:"Santa Catarina",lat:p.latitude,lng:p.longitude,message:o,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},label:{options:{noHide:!0}}})})})},angular.extend(p,{center:{lat:-27.226548,lng:-52.018311,zoom:17},markers:p.markers,defaults:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),p.ajustarMapa=function(){a.getMap().then(function(a){setTimeout(function(){a.invalidateSize(),a._resetView(a.getCenter(),a.getZoom(),!0),a.fire("layeradd",{layer:this})},200)})},p.getMarcasFipe=function(){var a=p.acaoCriminosa.veiculos.tipo,e=i.apiUrl+"/getMarcaFipe/"+a;t.post(e).then(function(a){p.marcasFipe=a.data},function(a){console.log("Erro")})},p.getModelosFipe=function(){var a=p.acaoCriminosa.veiculos.tipo,e=p.acaoCriminosa.veiculos.marca,o=i.apiUrl+"/getModeloFipe/"+a+"/"+e;t.post(o).then(function(a){p.modelosFipe=a.data},function(a){console.log("Erro")})},p.getAnoFipe=function(){var a=p.acaoCriminosa.veiculos.tipo,e=p.acaoCriminosa.veiculos.marca,o=p.acaoCriminosa.veiculos.modelo,n=i.apiUrl+"/getAnoFipe/"+a+"/"+e+"/"+o;t.post(n).then(function(a){p.anoFipe=a.data},function(a){console.log("Erro")})},p.corVeiculo=[{name:"Azul"},{name:"Prata"},{name:"Preto"},{name:"Vermelho"}],p.ajustarMapa(),p.searchAcoesCriminosas()}angular.module("primeiraApp").controller("AcoesCriminosasCtrl",["$scope","$http","$location","msgs","tabs","consts","leafletData","$timeout","leafletMarkerEvents","leafletMarkersHelpers","auth",AcoesCriminosasController]);
"use strict";function AlertasController(a,r,t,o,n,i,e,l,s,m,p){var c=a;c.$on("$destroy",function(){m.resetMarkerGroups()}),c.searchAlertas=function(){c.ajustarMapa(),n.show(a,{tabList:!0,tabCreate:!0}),c.user_cooperativa=p.getUser().cooperativa,c.user_pa=p.getUser().pa,c.user_id=p.getUser()._id,c.user_nivel=p.getUser().nivel;var e=i.apiUrl+"/alertas/buscarAlertas/"+c.user_cooperativa+"/"+c.user_pa+"/"+c.user_nivel;r.post(e).then(function(e){c.alertas=e.data,c.alerta={},n.show(a,{tabList:!0,tabCreate:!0})},function(e){console.log("Fail")})},c.haSuspeitos="nao",c.haSuspeitos2="nao",c.haSuspeitos3="nao",c.haSuspeitos4="nao",c.haVeiculo="nao",c.cadastrarAlerta=function(){var e=i.apiUrl+"/alertas";c.alerta.user_cooperativa=c.user_cooperativa,c.alerta.user_pa=c.user_pa,c.alerta.user_id=c.user_id,r.post(e,c.alerta).then(function(e){c.alerta={},t.path("/dashboard"),o.addSuccess("Operação realizada com sucesso!!")}).catch(function(e){o.addError(e.data.errors)})},c.marcarPosicaoAlerta=function(){c.markers2={sicoob:{lat:-27.226785483109737,lng:-52.01850950717926,draggable:!0,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},focus:!0}},c.events2={markers:{enable:s.getAvailableEvents()}},c.eventDetected="No events yet...";var e=s.getAvailableEvents();for(var a in e){var t="leafletDirectiveMarker."+e[a];c.$on(t,function(e,a){c.eventDetected=e.name})}c.$on("leafletDirectiveMarker.dragend",function(e,a){c.alerta.latitude=a.model.lat,c.alerta.longitude=a.model.lng})},angular.extend(c,{center2:{lat:-27.226548,lng:-52.018311,zoom:17},markers2:c.markers2,defaults2:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),c.cancel=function(){t.path("/dashboard")},c.qualAlerta=[{name:"Suspeito"},{name:"Veículo"}],c.fonte=[{name:"Polícia Militar"},{name:"Polícia Civil"},{name:"Gerente"}],c.etnia=[{name:"Branco"},{name:"Negros"},{name:"Amarelo"},{name:"Indígena"},{name:"Pardo"},{name:"Mulato"},{name:"Caboclo"}],c.cumprimentoCabelo=[{name:"Curto"},{name:"Médio"},{name:"Longo"},{name:"Calvo"}],c.corCabelo=[{name:"Louro"},{name:"Preto"},{name:"Castanho"},{name:"Ruivo"},{name:"Grisalho"}],c.alturaSuspeito=[{name:"150"},{name:"155"},{name:"160"},{name:"165"},{name:"170"},{name:"175"},{name:"180"},{name:"185"},{name:"190"},{name:"195"},{name:"200"}],c.idadeSuspeito=[{name:"15"},{name:"20"},{name:"25"},{name:"30"},{name:"35"},{name:"40"},{name:"45"},{name:"50"},{name:"55"},{name:"60"},{name:"65"},{name:"70"},{name:"75"},{name:"80"}],c.pesoSuspeito=[{name:"50"},{name:"55"},{name:"60"},{name:"65"},{name:"70"},{name:"75"},{name:"80"},{name:"85"},{name:"90"},{name:"95"},{name:"100"},{name:"110"},{name:"120"},{name:"130"}],c.armaSuspeito=[{name:"Pistola"},{name:"Revolver"},{name:"Fuzil"},{name:"SMG"}],c.markers=new Array,c.buscaLatLong=function(){var e=i.apiUrl+"/alertas/searchAlertas/";r.get(e).then(function(e){c.alertas=e.data,angular.forEach(c.alertas,function(e,a){c.latitude=parseFloat(e.latitude),c.longitude=parseFloat(e.longitude),c.tipoAlerta=e.tipoAlerta;var t=c.tipoAlerta;c.markers.push({group:"Santa Catarina",lat:c.latitude,lng:c.longitude,message:t,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},label:{options:{noHide:!0}}})})})},angular.extend(c,{center:{lat:-27.226548,lng:-52.018311,zoom:17},markers:c.markers,defaults:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),c.ajustarMapa=function(){e.getMap().then(function(e){setTimeout(function(){e.invalidateSize(),e._resetView(e.getCenter(),e.getZoom(),!0),e.fire("layeradd",{layer:this})},200)})},c.getMarcasFipe=function(){var e=c.alerta.veiculos.tipo,a=i.apiUrl+"/getMarcaFipe/"+e;r.post(a).then(function(e){c.marcasFipe=e.data},function(e){console.log("Erro")})},c.getModelosFipe=function(){var e=c.alerta.veiculos.tipo,a=c.alerta.veiculos.marca,t=i.apiUrl+"/getModeloFipe/"+e+"/"+a;r.post(t).then(function(e){c.modelosFipe=e.data},function(e){console.log("Erro")})},c.getAnoFipe=function(){var e=c.alerta.veiculos.tipo,a=c.alerta.veiculos.marca,t=c.alerta.veiculos.modelo,o=i.apiUrl+"/getAnoFipe/"+e+"/"+a+"/"+t;r.post(o).then(function(e){c.anoFipe=e.data},function(e){console.log("Erro")})},c.corVeiculo=[{name:"Azul"},{name:"Prata"},{name:"Preto"},{name:"Vermelho"}],c.ajustarMapa(),c.searchAlertas()}angular.module("primeiraApp").controller("AlertasCtrl",["$scope","$http","$location","msgs","tabs","consts","leafletData","$timeout","leafletMarkerEvents","leafletMarkersHelpers","auth",AlertasController]);
"use strict";angular.module("primeiraApp").controller("AuthCtrl",["$location","msgs","auth",function(o,t,n){var r=this;r.loginMode=!0,r.changeMode=function(){return r.loginMode=!r.loginMode},r.login=function(){n.login(r.user,function(n){return n?t.addError(n):o.path("/")})},r.signup=function(){n.signup(r.user,function(n){return n?t.addError(n):o.path("/")})},r.getUser=function(){return n.getUser()},r.logout=function(){n.logout(function(){return o.path("/")})}}]);
"use strict";angular.module("primeiraApp").constant("consts",{appName:"G-SEG Sistemas",version:"1.0",owner:"G-SEG",year:"2017",site:"http://cod3r.com.br",apiUrl:"http://localhost:3003/api",oapiUrl:"http://localhost:3003/oapi",userKey:"_primeira_app_user"}).run(["$rootScope","consts",function(o,t){o.consts=t}]);
"use strict";angular.module("primeiraApp").config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,a,e){t.state("dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html"}).state("acoesCriminosas",{url:"/acoesCriminosas",templateUrl:"acoesCriminosas/tabs.html"}).state("alertas",{url:"/alertas",templateUrl:"alertas/tabs.html"}).state("empresaResponsavel",{url:"/empresaResponsavel",templateUrl:"empresaResponsavel/tabs.html"}).state("manutencao",{url:"/manutencao",templateUrl:"manutencao/tabs.html"}).state("unidades",{url:"/unidades",templateUrl:"unidades/tabs.html"}),e.interceptors.push("handleResponseError")}]).run(["$rootScope","$http","$location","$window","auth",function(t,s,n,l,a){e(),t.$on("$locationChangeStart",function(){return e()});a.getUser();function e(){var e=a.getUser(),r="/auth.html",o=l.location.href.includes(r);e||o?e&&!e.isValid&&a.validateToken(e.token,function(t,a){a?(e.isValid=!0,s.defaults.headers.common.Authorization=e.token,o?l.location.href="/":n.path("/dashboard")):l.location.href=r}):l.location.href=r}}]);
"use strict";function DashboardController(o,e,a,r,t,s,n,i,l,u,c){var d=o;d.user_nivel=c.getUser().nivel,console.log("nivel: ",d.user_nivel),$(function(){$('[data-toggle="tooltip"]').tooltip()}),d.ptbr={search:"Buscar ...",nothingSelected:"Selecione uma Agência"},d.searchUnidades=function(){var o=s.apiUrl+"/unidades/searchUnidades";e.post(o).then(function(o){d.unidadesLista=o.data,d.unidadesLista.unshift({unidade:"Todas as Agências",parametro:"todas_agencias"}),d.unidades=o.data.length-1},function(o){console.log("Fail")})},d.pesquisarPorUnidade=0,d.pesquisarTodasUnidades=1,console.log(d.pesquisarPorUnidade),d.buscarDashboardUnidade=function(o){"todas_agencias"==o.parametro?(d.pesquisarPorUnidade=0,d.pesquisarTodasUnidades=1,console.log(d.pesquisarPorUnidade),d.searchAlertas(),d.searchManutencoes(),d.searchAcoesCriminosas(),d.buscarAcoesAnoGraficoDashboard(),d.buscarAlertasAnoGraficoDashboard(),d.buscarAcoesTipoGraficoDashboard(),d.buscarAlertasTipoGraficoDashboard()):(d.pesquisarPorUnidade=1,d.pesquisarTodasUnidades=0,d.searchAlertasUnidade(o.parametro),d.searchAcoesCriminosasUnidade(o.parametro),d.searchManutencaoUnidade(o.parametro),d.buscarAcoesAnoGraficoUnidade(o.parametro),d.buscarAlertasAnoGraficoUnidade(o.parametro),d.buscarAcoesTipoGraficoUnidade(o.parametro),d.buscarAlertasTipoGraficoUnidade(o.parametro))},d.searchAlertasUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/alertas/buscarAlertasUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.alertaUnidade=o.data},function(o){console.log("Fail")})},d.searchAcoesCriminosasUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/acoesCriminosas/buscarAcoesUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.acoesUnidade=o.data},function(o){console.log("Fail")})},d.searchManutencaoUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/manutencao/buscarManutencaoUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.manutencaoUnidade=o.data},function(o){console.log("Fail")})},d.searchAlertas=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/alertas/buscarAlertas/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.alerta=o.data.length},function(o){console.log("Fail")})},d.searchAcoesCriminosas=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/acoesCriminosas/buscarAcoesCriminosas/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.acoesCriminosas=o.data},function(o){console.log("Fail")})},d.searchManutencoes=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/manutencao/buscarManutencao/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.manutencoes=o.data.length},function(o){console.log("Fail")})},d.searchManutencoes(),d.searchAcoesCriminosas(),d.searchAlertas(),d.searchUnidades(),d.buscarAcoesAnoGraficoDashboard=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/acoesCriminosas/buscarAcoesAnoGraficoDashboard/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.jan=[],d.fev=[],d.mar=[],d.abr=[],d.mai=[],d.jun=[],d.jul=[],d.ago=[],d.set=[],d.out=[],d.nov=[],d.dez=[],d.acoesAno=o.data,angular.forEach(d.acoesAno,function(o,a){/(.*)-01-(.*)/.test(o.data)?d.jan.push(o):/(.*)-02-(.*)/.test(o.data)?d.fev.push(o):/(.*)-03-(.*)/.test(o.data)?d.mar.push(o):/(.*)-04-(.*)/.test(o.data)?d.abr.push(o):/(.*)-05-(.*)/.test(o.data)?d.mai.push(o):/(.*)-06-(.*)/.test(o.data)?d.jun.push(o):/(.*)-07-(.*)/.test(o.data)?d.jul.push(o):/(.*)-08-(.*)/.test(o.data)?d.ago.push(o):/(.*)-09-(.*)/.test(o.data)?d.set.push(o):/(.*)-10-(.*)/.test(o.data)?d.out.push(o):/(.*)-11-(.*)/.test(o.data)?d.nov.push(o):/(.*)-12-(.*)/.test(o.data)&&d.dez.push(o)}),d.labels_acoes_geral=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d.data_acoes_geral=[[d.jan.length,d.fev.length,d.mar.length,d.abr.length,d.mai.length,d.jun.length,d.jul.length,d.ago.length,d.set.length,d.out.length,d.nov.length,d.dez.length]]},function(o){console.log("Fail")})},d.buscarAcoesAnoGraficoDashboard(),d.buscarAcoesAnoGraficoUnidade=function(o){d.graficoTipoAcao=0,d.graficoAnoAcao=1,d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/acoesCriminosas/buscarAcoesAnoGraficoUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.jan=[],d.fev=[],d.mar=[],d.abr=[],d.mai=[],d.jun=[],d.jul=[],d.ago=[],d.set=[],d.out=[],d.nov=[],d.dez=[],d.acoesAno=o.data,angular.forEach(d.acoesAno,function(o,a){/(.*)-01-(.*)/.test(o.data)?d.jan.push(o):/(.*)-02-(.*)/.test(o.data)?d.fev.push(o):/(.*)-03-(.*)/.test(o.data)?d.mar.push(o):/(.*)-04-(.*)/.test(o.data)?d.abr.push(o):/(.*)-05-(.*)/.test(o.data)?d.mai.push(o):/(.*)-06-(.*)/.test(o.data)?d.jun.push(o):/(.*)-07-(.*)/.test(o.data)?d.jul.push(o):/(.*)-08-(.*)/.test(o.data)?d.ago.push(o):/(.*)-09-(.*)/.test(o.data)?d.set.push(o):/(.*)-10-(.*)/.test(o.data)?d.out.push(o):/(.*)-11-(.*)/.test(o.data)?d.nov.push(o):/(.*)-12-(.*)/.test(o.data)&&d.dez.push(o)}),d.labels_acoes_unidade=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d.data_acoes_unidade=[[d.jan.length,d.fev.length,d.mar.length,d.abr.length,d.mai.length,d.jun.length,d.jul.length,d.ago.length,d.set.length,d.out.length,d.nov.length,d.dez.length]]},function(o){console.log("Fail")})},d.buscarAcoesTipoGraficoDashboard=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/acoesCriminosas/buscarAcoesAnoGraficoDashboard/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.furto=[],d.rouboArmado=[],d.rouboFuradeira=[],d.rouboExplosivo=[],d.estelionato=[],d.acoesTipo=o.data,angular.forEach(d.acoesTipo,function(o,a){/Furto/.test(o.tipoAcao)?d.furto.push(o):/Roubo armado/.test(o.tipoAcao)?d.rouboArmado.push(o):/Roubo com furadeira/.test(o.tipoAcao)?d.rouboFuradeira.push(o):/Roubo com explosivo/.test(o.tipoAcao)?d.rouboExplosivo.push(o):/Estelionato/.test(o.tipoAcao)&&d.estelionato.push(o)});var a=d.furto.length,e=d.rouboArmado.length,r=d.rouboFuradeira.length,t=d.rouboExplosivo.length,s=d.estelionato.length;d.labels_acoes_tipo_geral=["Furto","Roubo armado","Roubo com furadeira","Roubo com explosivo","Estelionato"],d.data_acoes_tipo_geral=[a,e,r,t,s],d.colors_acoes_tipo_geral=[{backgroundColor:"rgba(87, 199, 212, 0.7)",pointBackgroundColor:"rgb(87, 199, 212)",pointHoverBackgroundColor:"rgb(87, 199, 212)",borderColor:"rgb(87, 199, 212)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(87, 199, 212)"},{backgroundColor:"rgba(70, 190, 138, 0.7)",pointBackgroundColor:"rgb(70, 190, 138)",pointHoverBackgroundColor:"rgb(70, 190, 138)",borderColor:"rgb(70, 190, 138)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(70, 190, 138)"},{backgroundColor:"rgba(225,56,18, 0.7)",pointBackgroundColor:"rgb(225,56,18)",pointHoverBackgroundColor:"rgb(225,56,18)",borderColor:"rgb(225,56,18)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(225,56,18)"},{backgroundColor:"rgba(242,164,0, 0.7)",pointBackgroundColor:"rgb(242,164,0)",pointHoverBackgroundColor:"rgb(242,164,0)",borderColor:"rgb(242,164,0)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(242,164,0)"},{backgroundColor:"rgba(41,84,171, 0.7)",pointBackgroundColor:"rgb(41,84,171)",pointHoverBackgroundColor:"rgb(41,84,171)",borderColor:"rgb(41,84,171)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(41,84,171)"}],d.options_acoes_tipo_geral={legend:{display:!0,position:"right"}}},function(o){console.log("Fail")})},d.buscarAcoesTipoGraficoDashboard(),d.buscarAcoesTipoGraficoUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/acoesCriminosas/buscarAcoesAnoGraficoUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.furto=[],d.rouboArmado=[],d.rouboFuradeira=[],d.rouboExplosivo=[],d.estelionato=[],d.acoesTipoUnidade=o.data,angular.forEach(d.acoesTipoUnidade,function(o,a){/Furto/.test(o.tipoAcao)?d.furto.push(o):/Roubo armado/.test(o.tipoAcao)?d.rouboArmado.push(o):/Roubo com furadeira/.test(o.tipoAcao)?d.rouboFuradeira.push(o):/Roubo com explosivo/.test(o.tipoAcao)?d.rouboExplosivo.push(o):/Estelionato/.test(o.tipoAcao)&&d.estelionato.push(o)});var a=d.furto.length,e=d.rouboArmado.length,r=d.rouboFuradeira.length,t=d.rouboExplosivo.length,s=d.estelionato.length;d.labels_acoes_tipo_unidade=["Furto","Roubo armado","Roubo com furadeira","Roubo com explosivo","Estelionato"],d.data_acoes_tipo_unidade=[a,e,r,t,s],d.colors_acoes_tipo_geral=[{backgroundColor:"rgba(87, 199, 212, 0.7)",pointBackgroundColor:"rgb(87, 199, 212)",pointHoverBackgroundColor:"rgb(87, 199, 212)",borderColor:"rgb(87, 199, 212)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(87, 199, 212)"},{backgroundColor:"rgba(70, 190, 138, 0.7)",pointBackgroundColor:"rgb(70, 190, 138)",pointHoverBackgroundColor:"rgb(70, 190, 138)",borderColor:"rgb(70, 190, 138)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(70, 190, 138)"},{backgroundColor:"rgba(225,56,18, 0.7)",pointBackgroundColor:"rgb(225,56,18)",pointHoverBackgroundColor:"rgb(225,56,18)",borderColor:"rgb(225,56,18)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(225,56,18)"},{backgroundColor:"rgba(242,164,0, 0.7)",pointBackgroundColor:"rgb(242,164,0)",pointHoverBackgroundColor:"rgb(242,164,0)",borderColor:"rgb(242,164,0)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(242,164,0)"},{backgroundColor:"rgba(41,84,171, 0.7)",pointBackgroundColor:"rgb(41,84,171)",pointHoverBackgroundColor:"rgb(41,84,171)",borderColor:"rgb(41,84,171)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(41,84,171)"}],d.options_acoes_tipo_unidade={legend:{display:!0,position:"right"}}},function(o){console.log("Fail")})},d.buscarAlertasAnoGraficoDashboard=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/alertas/buscarAlertasAnoGraficoDashboard/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.jan=[],d.fev=[],d.mar=[],d.abr=[],d.mai=[],d.jun=[],d.jul=[],d.ago=[],d.set=[],d.out=[],d.nov=[],d.dez=[],d.alertasAno=o.data,angular.forEach(d.alertasAno,function(o,a){/(.*)-01-(.*)/.test(o.data)?d.jan.push(o):/(.*)-02-(.*)/.test(o.data)?d.fev.push(o):/(.*)-03-(.*)/.test(o.data)?d.mar.push(o):/(.*)-04-(.*)/.test(o.data)?d.abr.push(o):/(.*)-05-(.*)/.test(o.data)?d.mai.push(o):/(.*)-06-(.*)/.test(o.data)?d.jun.push(o):/(.*)-07-(.*)/.test(o.data)?d.jul.push(o):/(.*)-08-(.*)/.test(o.data)?d.ago.push(o):/(.*)-09-(.*)/.test(o.data)?d.set.push(o):/(.*)-10-(.*)/.test(o.data)?d.out.push(o):/(.*)-11-(.*)/.test(o.data)?d.nov.push(o):/(.*)-12-(.*)/.test(o.data)&&d.dez.push(o)}),d.labels_alerta_geral=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d.data_alerta_geral=[[d.jan.length,d.fev.length,d.mar.length,d.abr.length,d.mai.length,d.jun.length,d.jul.length,d.ago.length,d.set.length,d.out.length,d.nov.length,d.dez.length]]},function(o){console.log("Fail")})},d.buscarAlertasAnoGraficoDashboard(),d.buscarAlertasAnoGraficoUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/alertas/buscarAlertasAnoGraficoUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.jan=[],d.fev=[],d.mar=[],d.abr=[],d.mai=[],d.jun=[],d.jul=[],d.ago=[],d.set=[],d.out=[],d.nov=[],d.dez=[],d.alertasAnoUnidade=o.data,angular.forEach(d.alertasAnoUnidade,function(o,a){/(.*)-01-(.*)/.test(o.data)?d.jan.push(o):/(.*)-02-(.*)/.test(o.data)?d.fev.push(o):/(.*)-03-(.*)/.test(o.data)?d.mar.push(o):/(.*)-04-(.*)/.test(o.data)?d.abr.push(o):/(.*)-05-(.*)/.test(o.data)?d.mai.push(o):/(.*)-06-(.*)/.test(o.data)?d.jun.push(o):/(.*)-07-(.*)/.test(o.data)?d.jul.push(o):/(.*)-08-(.*)/.test(o.data)?d.ago.push(o):/(.*)-09-(.*)/.test(o.data)?d.set.push(o):/(.*)-10-(.*)/.test(o.data)?d.out.push(o):/(.*)-11-(.*)/.test(o.data)?d.nov.push(o):/(.*)-12-(.*)/.test(o.data)&&d.dez.push(o)}),d.labels_alerta_unidade=["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],d.data_alerta_unidade=[[d.jan.length,d.fev.length,d.mar.length,d.abr.length,d.mai.length,d.jun.length,d.jul.length,d.ago.length,d.set.length,d.out.length,d.nov.length,d.dez.length]]},function(o){console.log("Fail")})},d.buscarAlertasTipoGraficoDashboard=function(){d.user_cooperativa=c.getUser().cooperativa,d.user_pa=c.getUser().pa,d.user_id=c.getUser()._id,d.user_nivel=c.getUser().nivel;var o=s.apiUrl+"/alertas/buscarAlertasAnoGraficoDashboard/"+d.user_cooperativa+"/"+d.user_pa+"/"+d.user_nivel;e.post(o).then(function(o){d.suspeitos=[],d.veiculos=[],d.alertasTipo=o.data,angular.forEach(d.alertasTipo,function(o,a){/Suspeito/.test(o.tipoAlerta)?d.suspeitos.push(o):/Veículo/.test(o.tipoAlerta)&&d.veiculos.push(o)}),d.labels_alerta_tipo_geral=["Suspeitos","Veículos"],d.data_alerta_tipo_geral=[d.suspeitos.length,d.veiculos.length],d.colors_alerta_tipo_geral=[{backgroundColor:"rgba(87, 199, 212, 0.7)",pointBackgroundColor:"rgb(87, 199, 212)",pointHoverBackgroundColor:"rgb(87, 199, 212)",borderColor:"rgb(87, 199, 212)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(87, 199, 212)"},{backgroundColor:"rgba(70, 190, 138, 0.7)",pointBackgroundColor:"rgb(70, 190, 138)",pointHoverBackgroundColor:"rgb(70, 190, 138)",borderColor:"rgb(70, 190, 138)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(70, 190, 138)"}],d.options_alerta_tipo_geral={legend:{display:!0,position:"right"}}},function(o){console.log("Fail")})},d.buscarAlertasTipoGraficoDashboard(),d.buscarAlertasTipoGraficoUnidade=function(o){d.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/alertas/buscarAlertasAnoGraficoUnidade/"+d.user_nivel+"/"+o;e.post(a).then(function(o){d.suspeitos=[],d.veiculos=[],d.alertasTipoUnidade=o.data,angular.forEach(d.alertasTipoUnidade,function(o,a){/Suspeito/.test(o.tipoAlerta)?d.suspeitos.push(o):/Veículo/.test(o.tipoAlerta)&&d.veiculos.push(o)}),d.labels_alerta_tipo_unidade=["Suspeitos","Veículos"],d.data_alerta_tipo_unidade=[d.suspeitos.length,d.veiculos.length],d.colors_alerta_tipo_unidade=[{backgroundColor:"rgba(87, 199, 212, 0.7)",pointBackgroundColor:"rgb(87, 199, 212)",pointHoverBackgroundColor:"rgb(87, 199, 212)",borderColor:"rgb(87, 199, 212)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(87, 199, 212)"},{backgroundColor:"rgba(70, 190, 138, 0.7)",pointBackgroundColor:"rgb(70, 190, 138)",pointHoverBackgroundColor:"rgb(70, 190, 138)",borderColor:"rgb(70, 190, 138)",pointBorderColor:"#fff",pointHoverBorderColor:"rgb(70, 190, 138)"}],d.options_alerta_tipo_unidade={legend:{display:!0,position:"right"}}},function(o){console.log("Fail")})},d.markers=new Array,d.buscaLatLong=function(){var o=s.apiUrl+"/acoesCriminosas/searchAcoesCriminosas/";e.get(o).then(function(o){d.acoesCriminosas=o.data,angular.forEach(d.acoesCriminosas,function(o,a){d.latitude=parseFloat(o.latitude),d.longitude=parseFloat(o.longitude),d.tipoAcao=o.tipoAcao;var e=d.tipoAcao;d.markers.push({group:"Santa Catarina",lat:d.latitude,lng:d.longitude,message:e,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},label:{options:{noHide:!0}}})})})},d.buscaLatLong2=function(){var o=s.apiUrl+"/acoesCriminosas/searchAcoesCriminosas/";e.get(o).then(function(o){d.acoesCriminosas=o.data,angular.forEach(d.acoesCriminosas,function(o,a){d.latitude=parseFloat(o.latitude),d.longitude=parseFloat(o.longitude),d.tipoAcao=o.tipoAcao;var e=d.tipoAcao;d.markers.push({group:"Santa Catarina",lat:d.latitude,lng:d.longitude,message:e,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},label:{options:{noHide:!0}}})})})},angular.extend(d,{center:{lat:-27.226548,lng:-52.018311,zoom:17},markers:d.markers,defaults:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),angular.extend(d,{center2:{lat:-27.226548,lng:-52.018311,zoom:9},markers2:d.markers2,defaults2:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),d.ajustarMapa=function(){d.buscaLatLong(),n.getMap().then(function(o){setTimeout(function(){o.invalidateSize(),o._resetView(o.getCenter(),o.getZoom(),!0),o.fire("layeradd",{layer:this})},200)})},d.ajustarMapa()}angular.module("primeiraApp").controller("DashboardCtrl",["$scope","$http","$location","msgs","tabs","consts","leafletData","$timeout","leafletMarkerEvents","leafletMarkersHelpers","auth",DashboardController]);
"use strict";function EmpresaResponsavelController(a,s,r,o,p,n,e,t){var l=a;l.searchEmpresaResponsavel=function(){p.show(a,{tabList:!0,tabCreate:!0}),l.user_cooperativa=t.getUser().cooperativa,l.user_pa=t.getUser().pa,l.user_id=t.getUser()._id,l.user_nivel=t.getUser().nivel;var e=n.apiUrl+"/empresaResponsavel/buscarEmpresaResponsavel/"+l.user_cooperativa+"/"+l.user_pa+"/"+l.user_nivel;s.post(e).then(function(e){l.empresasResponsaveis=e.data,l.empresaResponsavel={},p.show(a,{tabList:!0,tabCreate:!0})},function(e){console.log("Fail")})},l.buscarCEP=function(){var e=l.empresaResponsavel.cep,a=n.apiUrl+"/empresaResponsavel/buscarCep/"+e;s.post(a).then(function(e){l.empresaResponsavel.logradouro=e.data.logradouro,l.empresaResponsavel.bairro=e.data.bairro,l.empresaResponsavel.cidade=e.data.localidade,l.empresaResponsavel.uf=e.data.uf},function(e){console.log("CEP INEXISTENTE")})},l.cadastrarEmpresaResponsavel=function(){var e=n.apiUrl+"/empresaResponsavel";l.empresaResponsavel.user_cooperativa=l.user_cooperativa,l.empresaResponsavel.user_pa=l.user_pa,l.empresaResponsavel.user_id=l.user_id,s.post(e,l.empresaResponsavel).then(function(e){l.empresaResponsavel={},o.addSuccess("Operação realizada com sucesso!!"),r.path("/dashboard")}).catch(function(e){o.addError(e.data.errors)})},l.cancel=function(){r.path("/dashboard")},l.searchEmpresaResponsavel()}angular.module("primeiraApp").controller("EmpresaResponsavelCtrl",["$scope","$http","$location","msgs","tabs","consts","$timeout","auth",EmpresaResponsavelController]);
"use strict";function ManutencaoController(e,n,t,r,o,s,a,c){var u=e;u.getUser=function(){u.user_cooperativa=c.getUser().cooperativa,u.user_pa=c.getUser().pa,u.user_id=c.getUser()._id,u.user_nivel=c.getUser().nivel},u.searchManutencao=function(){o.show(e,{tabList:!0,tabCreate:!0}),u.user_cooperativa=c.getUser().cooperativa,u.user_pa=c.getUser().pa,u.user_id=c.getUser()._id,u.user_nivel=c.getUser().nivel;var a=s.apiUrl+"/manutencao/buscarManutencao/"+u.user_cooperativa+"/"+u.user_pa+"/"+u.user_nivel;n.post(a).then(function(a){u.manutencao=a.data,u.manutencaoForm={},o.show(e,{tabList:!0,tabCreate:!0})},function(a){console.log("Fail")})},u.searchEmpresaResponsavel=function(){var a=s.apiUrl+"/empresaResponsavel/searchEmpresaResponsavel";n.get(a).then(function(a){u.empresasResponsaveis=a.data})},u.cadastrarManutencao=function(){var a=s.apiUrl+"/manutencao";u.manutencaoForm.user_cooperativa=u.user_cooperativa,u.manutencaoForm.user_pa=u.user_pa,u.manutencaoForm.user_id=u.user_id,n.post(a,u.manutencaoForm).then(function(a){u.manutencaoForm={},u.searchManutencao(),r.addSuccess("Manutenção cadastrada com sucesso!"),t.path("/dashboard")}).catch(function(a){r.addError(a.data.errors)})},u.cancel=function(){o.show(u,{tabList:!0,tabCreate:!0}),u.manutencaoForm={},u.searchManutencao(),t.path("/dashboard")},u.equipamento=[{name:"CFTV"},{name:"Sistema de Alarme"},{name:"Sistema de Alarme de Incêncio"},{name:"Iluminação"},{name:"Porta Giratória"},{name:"Cofre"}],u.getUser(),u.searchManutencao(),u.searchEmpresaResponsavel()}angular.module("primeiraApp").controller("ManutencaoCtrl",["$scope","$http","$location","msgs","tabs","consts","$timeout","auth",ManutencaoController]);
"use strict";function UnidadesController(a,d,t,r,n,s,e,o,l,i,u){var c=a;c.$on("$destroy",function(){i.resetMarkerGroups()}),c.markers_unidades=new Array,c.searchUnidades=function(){c.ajustarMapa(),n.show(a,{tabList:!0,tabCreate:!0});var e=s.apiUrl+"/unidades/searchUnidades";d.get(e).then(function(e){c.unidades=e.data,c.unidade={},angular.forEach(c.unidades,function(e,a){c.latitude=parseFloat(e.latitude),c.longitude=parseFloat(e.longitude),c.unidadeMessage=e.unidade,c.markers_unidades.push({group:"Santa Catarina",lat:c.latitude,lng:c.longitude,message:c.unidadeMessage,icon:{type:"awesomeMarker",prefix:"fa",icon:"building",iconColor:"white",markerColor:"green"},label:{options:{noHide:!0}}})})})},angular.extend(c,{center_list:{lat:-26.93139823,lng:-51.01158833,zoom:7.5},markers_list:c.markers_unidades,defaults_list:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),c.buscarCEP=function(){var e=c.unidade.cep;c.marcarUnidade(e);var a=s.apiUrl+"/empresaResponsavel/buscarCep/"+e;d.post(a).then(function(e){c.unidade.logradouro=e.data.logradouro,c.unidade.bairro=e.data.bairro,c.unidade.cidade=e.data.localidade,c.unidade.uf=e.data.uf},function(e){console.log("CEP INEXISTENTE")})},c.cadastrarUnidade=function(){var e=s.apiUrl+"/unidades";d.post(e,c.unidade).then(function(e){c.unidade={},t.path("/dashboard"),r.addSuccess("Agência cadastrada com sucesso!")}).catch(function(e){r.addError(e.data.errors)})},c.replaceSpaces=function(){for(var e=c.unidade.unidade.split(""),a=new Array,t=e.length,r="ÀÁÂÃÄÅàáâãäåÒÓÔÕÕÖØòóôõöøÈÉÊËèéêëðÇçÐÌÍÎÏìíîïÙÚÛÜùúûüÑñŠšŸÿýŽž",n=0;n<t;n++)-1!=r.indexOf(e[n])?a[n]="AAAAAAaaaaaaOOOOOOOooooooEEEEeeeeeCcDIIIIiiiiUUUUuuuuNnSsYyyZz".substr(r.indexOf(e[n]),1):a[n]=e[n];return c.parametro1=a.join(""),c.parametro2=c.parametro1.split(" ").join("_"),c.unidade.parametro=c.parametro2.toLowerCase(),c.unidade.parametro},c.marcarUnidade=function(e){var a=s.apiUrl+"/getLatLong/"+e;if(e){d.post(a).then(function(e){return c.unidade.latPar=e.data.lat,c.unidade.lngPar=e.data.lng,c.unidade.latPar,c.unidade.lngPar},function(e){console.log("CEP INEXISTENTE")});var t=c.unidade.latPar,r=c.unidade.lngPar;c.markers={sicoob:{lat:t,lng:r,draggable:!0,icon:{type:"awesomeMarker",prefix:"fa",icon:"exclamation",iconColor:"white",markerColor:"blue"},focus:!0}},c.events={markers:{enable:l.getAvailableEvents()}},c.eventDetected="No events yet...";var n=l.getAvailableEvents();for(var o in n){var i="leafletDirectiveMarker."+n[o];c.$on(i,function(e,a){c.eventDetected=e.name})}c.$on("leafletDirectiveMarker.dragend",function(e,a){return c.unidade.latitude=a.model.lat,c.unidade.longitude=a.model.lng,c.unidade.latitude,c.unidade.longitude})}},angular.extend(c,{center:{lat:-27.226548,lng:-52.018311,zoom:8},markers:c.markers,defaults:{tileLayer:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",zoomControlPosition:"topright",tileLayerOptions:{opacity:.9,detectRetina:!0,reuseTiles:!0,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> | &copy <a href="http://www.openstreetmap.org/copyright">GSEG Sistemas</a>'},scrollWheelZoom:!0,minZoom:3,worldCopyJump:!0}}),c.cancel=function(){n.show(c,{tabList:!0,tabCreate:!0}),c.manutencaoForm={},c.searchManutencao(),t.path("/dashboard")},c.ajustarMapa=function(){e.getMap().then(function(e){setTimeout(function(){e.invalidateSize(),e._resetView(e.getCenter(),e.getZoom(),!0),e.fire("layeradd",{layer:this})},200)})},c.ajustarMapa(),c.searchUnidades()}angular.module("primeiraApp").controller("UnidadesCtrl",["$scope","$http","$location","msgs","tabs","consts","leafletData","$timeout","leafletMarkerEvents","leafletMarkersHelpers","auth",UnidadesController]);
"use strict";angular.module("primeiraApp").component("authField",{bindings:{id:"@",label:"@",type:"@",grid:"@",icon:"@",model:"=",placeholder:"@",hide:"<"},controller:function(){var t=this;this.$onInit=function(){t.iconClasses="glyphicon glyphicon-"+t.icon+" form-control-feedback"}},template:'\n\t\t<div class="form-group has-feedback">\n\t\t\t<input ng-model="$ctrl.model" id="{{ $ctrl.id }}" class="form-control"\n\t\t\t\ttype="{{ $ctrl.type }}" placeholder="{{ $ctrl.placeholder }}"\n\t\t\t\tng-hide="$ctrl.hide" />\n\t\t\t<span class="{{ $ctrl.iconClasses }}"></span>\n\t\t</div>\n\t'});
"use strict";angular.module("primeiraApp").component("contentHeader",{bindings:{name:"@",small:"@"},template:'\n      <section class="content-header">\n        <h1>{{ $ctrl.name }} <small>{{ $ctrl.small }}</small></h1>\n      </section>\n   '});
"use strict";angular.module("primeiraApp").component("field",{bindings:{id:"@",label:"@",type:"@",grid:"@",model:"=",placeholder:"@",readonly:"<"},controller:["gridSystem",function(l){var r=this;this.$onInit=function(){return r.gridClasses=l.toCssClasses(r.grid)}}],template:'\n   <div class="{{ $ctrl.gridClasses }}">\n     <div class="form-group">\n       <label for="{{ $ctrl.id }}">{{ $ctrl.label }}</label>\n       <input ng-model="$ctrl.model" id="{{ $ctrl.id }}" class="form-control"\n          type="{{ $ctrl.type }}" placeholder="{{ $ctrl.placeholder }}"\n          ng-readonly="$ctrl.readonly" />\n     </div>\n   </div>\n  '});
"use strict";angular.module("primeiraApp").component("hiddenField",{bindings:{id:"@",label:"@",type:"@",grid:"@",model:"=",value:"=",placeholder:"@",readonly:"<"},controller:["gridSystem",function(l){var e=this;this.$onInit=function(){return e.gridClasses=l.toCssClasses(e.grid)}}],template:'\n   <div class="{{ $ctrl.gridClasses }}">\n     <div class="form-group">\n       <label for="{{ $ctrl.id }}">{{ $ctrl.label }}</label>\n       <input ng-model="$ctrl.model" ng-value="$ctrl.value" id="{{ $ctrl.id }}" class="form-control"\n          type="{{ $ctrl.type }}" placeholder="{{ $ctrl.placeholder }}"\n          ng-readonly="$ctrl.readonly" />\n     </div>\n   </div>\n  '});
"use strict";angular.module("primeiraApp").component("paginator",{bindings:{url:"@",pages:"@"},controller:["$location",function(r){this.$onInit=function(){var n=parseInt(this.pages)||1;this.pagesArray=Array(n).fill(0).map(function(n,r){return r+1}),this.current=parseInt(r.search().page)||1,this.needPagination=1<this.pages,this.hasPrev=1<this.current,this.hasNext=this.current<this.pages,this.isCurrent=function(n){return this.current==n}}}],template:'\n      <ul ng-if="$ctrl.needPagination"\n        class="pagination pagination-sm no-margin pull-right">\n        <li ng-if="$ctrl.hasPrev">\n          <a href="{{ $ctrl.url }}?page={{ $ctrl.current - 1}}">«</a>\n        </li>\n        <li ng-class="{active: $ctrl.isCurrent(i)}"\n          ng-repeat="i in $ctrl.pagesArray">\n          <a href="{{ $ctrl.url }}?page={{i}}">{{i}}</a>\n        </li>\n        <li ng-if="$ctrl.hasNext">\n          <a href="{{ $ctrl.url }}?page={{ $ctrl.current + 1}}">»</a>\n        </li>\n      </ul>\n   '});
"use strict";angular.module("primeiraApp").component("valueBox",{bindings:{grid:"@",colorClass:"@",value:"@",text:"@",iconClass:"@"},controller:["gridSystem",function(s){var n=this;this.$onInit=function(){return n.gridClasses=s.toCssClasses(n.grid)}}],template:'\n  <div class="{{ $ctrl.gridClasses }}">\n    <div class="small-box {{ $ctrl.colorClass }}">\n      <div class="inner">\n        <h3>{{ $ctrl.value }}</h3>\n        <p>{{ $ctrl.text }}</p>\n      </div>\n      <div class="icon">\n        <i class="{{ $ctrl.iconClass }}"></i>\n      </div>\n    </div>\n  </div>\n  '});
"use strict";angular.module("primeiraApp").factory("auth",["$http","consts",function(a,e){var n=null;function o(){return n||(n=JSON.parse(localStorage.getItem(e.userKey))),n}function u(t,n,o){a.post(e.oapiUrl+"/"+t,n).then(function(t){localStorage.setItem(e.userKey,JSON.stringify(t.data)),a.defaults.headers.common.Authorization=t.data.token,o&&o(null,t.data)}).catch(function(t){o&&o(t.data.errors,null)})}function i(t){n=null,localStorage.removeItem(e.userKey),a.defaults.headers.common.Authorization="",t&&t(null)}return{signup:function(t,n){u("signup",t,n)},login:function(t,n){u("login",t,n)},logout:i,getUser:o,validateToken:function(t,n){t?a.post(e.oapiUrl+"/validateToken",{token:t}).then(function(t){t.data.valid?a.defaults.headers.common.Authorization=o().token:i(),n&&n(null,t.data.valid)}).catch(function(t){n&&n(t.data.errors)}):n&&n("Token inválido.")}}}]);
"use strict";angular.module("primeiraApp").factory("gridSystem",[function(){return{toCssClasses:function(r){var s=r?r.split(" "):[],t="";return s[0]&&(t+="col-xs-"+s[0]),s[1]&&(t+=" col-sm-"+s[1]),s[2]&&(t+=" col-md-"+s[2]),s[3]&&(t+=" col-lg-"+s[3]),t}}}]);
"use strict";angular.module("primeiraApp").factory("handleResponseError",["$q","$window","consts",function(e,o,t){return{responseError:function(r){return 403===r.status&&(localStorage.removeItem(t.userKey),o.location.href="/"),e.reject(r)}}}]);
"use strict";function MsgsFactory(o){function s(r,s,c){r instanceof Array?r.forEach(function(r){return o[c](r,s)}):o[c](r,s)}return{addSuccess:function(r){s(r,"Sucesso","success")},addError:function(r){s(r,"Erro","error")}}}angular.module("primeiraApp").factory("msgs",["toastr",MsgsFactory]);
"use strict";angular.module("primeiraApp").factory("tabs",[function(){return{show:function(t,a){var e=a.tabList,i=void 0!==e&&e,r=a.tabCreate,b=void 0!==r&&r,o=a.tabUpdate,d=void 0!==o&&o,n=a.tabDelete,s=void 0!==n&&n;t.tabList=i,t.tabCreate=b,t.tabUpdate=d,t.tabDelete=s}}}]);